---

#########################################################
## Nexus Repository role defaults                      ##
#########################################################

# default role variables for the nexus-repository role
nexus_repository:
  # address is the URL to connect to the Nexus Repository OSS server.
  address: ""
  # username is the username to connect to the Nexus Repository OSS server.
  username: ""
  # password is the password to connect to the Nexus Repository OSS server.
  password: ""
  # metadata contains information about the role.
  metadata:
    name: "nexus-repository"
    description: "Sonatype Nexus Repository OSS Artifact repository."
    version: "1.0.0"
    maintainer: ""
    maintainer_email: ""
  # application is the Nexus Repository OSS application configuration.
  application:
    # validate_certs configures if the certificate of the application server should be validated. example: true or false. 
    validate_certs: false
  # users contains the configuration for the automation user used for the Nexus Repository OSS server.
  users:
    # automation_username is the username used for the automation user. example: "nexus-automation".
    automation_username: "nexus-automation"
    # automation_password is the password used for the automation user. example: "nexus-automation-password".
    automation_password: "nexus-automation-password"
    # automation_email is the email address used for the automation user. example: "nexus-automation@me.local".
    automation_email: "nexus-automation@me.local"
  # container contains the configuration for the Nexus Repository OSS container.
  container:
    # name is the name of the container used in podman or docker. example: "vault".
    name: "nexus3"
    # uninstall indicates if the container should be uninstalled or not. example: true or false. Default is false.
    uninstall: false
    # platform is the platform used for the container. example: "podman" or "docker".
    platform: "podman"
    # volumes is a list of volumes used in the container. example: ["vault/config:/vault/config:Z"] or ["vault/config:/vault/config:Z", "vault/file:/vault/file:Z"].
    volumes:
      - "nexus/nexus-data:/nexus-data:Z"
    # volume_mode is the mode of the volume used in the container. example: "0777" or "0755". Default is "0777".
    volume_mode: "0777"
    # ports is a list of ports used in the container. example: ["8081:8081"] or ["8081:8081", "8082:8082"].
    ports:
      - "8081:8081"
    #
    container_healthcheck: "curl -X 'GET' http://{{ ansible_default_ipv4.address }}:8081/service/rest/v1/status/check -H 'accept: application/json' -H 'NX-ANTI-CSRF-TOKEN: 0.4986100467581339' -H 'X-Nexus-UI: true' || exit 1"
    #
    container_healthcheck_start: "30s"
    # repository_url can be a URL to a docker image or a tar file. example: "https://docker.io/sonatype/nexus3" or "/tmp/nexus3.67.1.tar", "https://192.168.1.1/repo/nexus.tar".
    repository_url: "docker.io/sonatype/nexus3"
    # repository_checksum can be a checksum of the container file. example: "sha256:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef" or "1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef".
    # repository_checksum: "" TODO
    # repository_checksum_algorithm can be a checksum algorithm of the container file. example: "sha256", sha512", "md5".
    # repository_checksum_algorithm: "" TODO
    # repository_tag can be a tag of the image or a version of the tar file. example: "3.67.1" or "latest" Default is "latest".
    # repository_tag: "" TODO
    # quadlet_options is a list of options used in the container. example: ["Environment=NODE_ENV=production", "HealthCmd='wget --no-verbose --tries=1 --spider http://localhost:8080/api/health || exit 1 '"].
    # quadlet_options:

  secrets:
    # secret_name is the unique id of the vault used for storing secrets and configuration data. default is {{ansible_fqdn }}.
    secret_name: "{{ ansible_fqdn | replace('.', '-') }}"
    # secret_engine_name is the name of the vault used for storing secrets and configuration data. example: "nexus-repository".
    secret_engine_name: "nexus-repository"
    # <container_name>_secret_engine_description is the description of the vault used for storing secrets and configuration data. example: "Secrets for Sonatype Nexus Repository.".
    secret_engine_description: "Secrets for Sonatype Nexus Repository OSS."
